# Apress-Gists

![Иконка](/app/src/main/res/mipmap-xxxhdpi/ic_launcher_round.png)

Приложение представляет собой средство для создания заметок к фрагментам программного кода,
размещаемого на платформе Github.com.

Приложение работает на Android начиная с **2.3**, а не с **2.2**.
Этому есть множество причин, а именно крайне низкая распространённость требуемой версии на рынке
и невозможность использовать **appCompat**, что ведет к использования стилей платформы по-умолчанию.
Неприятный дизайн Android 2.2 Froyo портит впечатления от выполненной работы.

Приложение построено на архитектуре MVP и имеет следующие ключевые зависимости:

- rxjava 1
- dagger 2
- storio 1
- picasso 2
- butterknife 8

Использование rxjava первой версии, а не второй мотивируется
[отсутствием поддержки](https://github.com/pushtorefresh/storio/issues/685) у ORM библиотеки storio.

# Логика работы

При открытии списка All gists сначала выполняется запрос в базу данных, в случае если
ответ пустой выполняется запрос к серверу, парсинг ответа и сохранение объектов в локальную базу данных.
Таким образом, локальный кеш имеет приоритет над серверным ответом.

Презентор экрана All gists имеет подписку на события обновления содержимого базы данных.
В случае изменения описания или заметки к фрагменту кода на экране Gist,
событие обновления БД будет рассмотрено  в контексте поиска отличающихся элементов в двух списках (старом наборе данных и новом).
Как только будет найден обновленный элемент, адаптер списка получит сигнал об изменении ячейки и алгоритм поиска прервется.

Экран Gist предоставляет возможность редактирования описания и заметки к фрагменту кода. Экран All in One содержит две вкладки, содержимое которых аналогично описанным выше экранам.